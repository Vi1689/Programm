# Чат-бот для продаж роутеров

## Описание проекта  
Данный проект представляет собой **чат-бота**,  бот выполняет функции **менеджера по продажам роутеров** для компании Eltex, выдаёт шутки/цитаты.

**Автор**: Баранов Виталий
**Дата создания**: 13 июля 2025 г.

## Оглавление  
- [Цель проекта](#цель-проекта)  
- [Функциональные цели](#функциональные-цели)  
- [Архитектура](#архитектура)  
- [Требования](#требования)  
- [Технологии](#технологии)  
- [Установка](#установка)  
- [Использование](#использование)  
- [Тестирование](#тестирование)  
- [Разработка и обслуживание](#разработка-и-обслуживание)  
- [Вклад](#вклад)  
- [Лицензия](#лицензия)
## Цель проекта  
Создание текстового чат-бота, способного:  
- Отвечать на пользовательские вопросы  
- Предоставлять информацию о роутерах  
- Вести диалог в удобной форме  
- Поддерживать команды для получения цитат, шуток и прочей информации

## Функциональные цели  
- **Графический интерфейс** (на базе `ncurses`)  
- **Простая регистрация и авторизация**  
- **Поддержка шуток и цитат**  
- **Обработка команд и диалога**  
- **Элемент юмора** для улучшения взаимодействия
- **Функционал бана** По ip адресу
- **Хранение сообщений с прошлых сессий**
- **Обновление чата и получение сообщений, даже если они написаны с другого устройства**
- **Многопоточность**

## Архитектура  
**Клиент**:  
- UI на `ncurses`  
- Шифрование логина и сообщений  
- Структура `client_message` для обмена данными  

**Сервер**:  
- UDP, порт 8080  
- Потоковая обработка (`thread_pool`)  
- Работа с командами и сигналами (`SIGINT`, `SIGTERM`, `SIGUSR1`)  
- Глобальные переменные: сокет, БД, флаги  

**База данных**:  
- Хэш-таблицы  
- Хранит пользователей, бан-лист, шутки/цитаты, историю  

**Парсер**:  
- Токенизация и валидация (`step_1`, `step_2`, `step_3`)  
- Поддержка: `/help`, `/info`, `/joke`, `/quote`, `/login`, `/registr`  
- Возможность добавления новых шуток и цитат

## Требования  
**Клиент**:  
- `ncurses`  
- Авторизация с шифрованием  

**Сервер**:  
- Парсинг и обработка команд  
- Команды:  
  - `/help`, `/info`  
  - `/joke [funny|not_funny]`  
  - `/quote [science|literature]`  
  - `/new joke`, `/new quote`  
- Система блокировки (по IP)  
- Хранение истории общения  

## Технологии  
- Язык: **C**  
- Сеть: **UDP**  
- UI: **ncurses**  
- Шифрование: **libsodium**  
- Тесты: **ctest**  
- Потоки: `pthread`  
- Парсинг: кастомный модуль
## Установка  
**Зависимости (Ubuntu/Debian)**:  
```bash
sudo apt-get update  
sudo apt-get install build-essential libncurses5-dev libncursesw5-dev libsodium-dev clang-format valgrind
```

**Альтернатива (Fedora/RHEL)**:  
```bash
sudo dnf install make gcc ncurses-devel libsodium-devel clang-format valgrind
```

**Сборка проекта**:  
```bash
git clone https://study-git.eltex-co.ru/2025-july/chatbot-july-2025  
cd chatbot-july-2025  
make
```

## Использование  
**Сервер (порт 8080)**:  
```bash
./bin/server
```  
**Клиент (порт 7777, адрес сервера 172.18.0.1)**:  
```bash
./bin/client
```  

**Поддерживаемые команды**:  
- `/help` — показать команды  
- `/info` — информация о боте  
- `/joke funny` — смешная шутка  
- `/joke not_funny` — несмешная шутка  
- `/quote science` — научная цитата  
- `/quote literature` — литературная цитата  
- `/new joke funny <текст>` — добавить шутку  
- `/new quote science <текст>` — добавить цитату  

## Тестирование  
**Запуск тестов**:  
```bash
cd tests  
make
```  

## Разработка и обслуживание  
- Форматирование кода: `make form`  
- Очистка сборки: `make clean`  
- Полная пересборка: `make rebuild`
